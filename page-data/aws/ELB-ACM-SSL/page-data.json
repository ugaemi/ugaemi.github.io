{"componentChunkName":"component---src-templates-blog-post-js","path":"/aws/ELB-ACM-SSL/","result":{"data":{"site":{"siteMetadata":{"title":"개미의 개발노트","author":"ugaemi","siteUrl":"http://ugaemi.com","comment":{"disqusShortName":"","utterances":"ugaemi/blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"a120f994-56e3-5aaf-b6d7-55f7efbb00ad","excerpt":"개요 단일 서버로만 구성된 프로젝트에는 Let’s Encrypt 를 이용해 SSL 인증서를 발급 및 적용해왔는데, 이번 프로젝트에는 AWS 환경에서 ELB 를 연결해서 Certificate Manager 인증서로 https 환경을 구성해보기로 했다. 로드 밸런서 생성 AWS EC2 > 로드 밸런싱 > 로드밸런서에서 로드 밸런서 생성을 클릭한다. 로드밸런서 타입 선택 화면이 보이면 좌측의 Application Load Balancer를 선택한다.  로드밸런서 이름, VPC…","html":"<h1 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h1>\n<p>단일 서버로만 구성된 프로젝트에는 <a href=\"https://letsencrypt.org/ko/\">Let’s Encrypt</a> 를 이용해 SSL 인증서를 발급 및 적용해왔는데,</p>\n<p>이번 프로젝트에는 AWS 환경에서 <a href=\"https://aws.amazon.com/ko/elasticloadbalancing/\">ELB</a> 를 연결해서 <a href=\"https://aws.amazon.com/ko/certificate-manager/\">Certificate Manager</a> 인증서로 https 환경을 구성해보기로 했다.</p>\n<h2 id=\"로드-밸런서-생성\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EC%83%9D%EC%84%B1\" aria-label=\"로드 밸런서 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EC%83%9D%EC%84%B1\" aria-label=\"로드 밸런서 생성 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로드 밸런서 생성</h2>\n<p><strong>AWS EC2 > 로드 밸런싱 > 로드밸런서</strong>에서 <strong>로드 밸런서 생성</strong>을 클릭한다.</p>\n<p>로드밸런서 타입 선택 화면이 보이면 좌측의 <strong>Application Load Balancer</strong>를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBklEQVQoz21T23KbMBT0//9UnztNn2wndVJfYsBYSOgGAnHdLjiTZqbVzA4XHfbs6iybt7ffeH55IX5ht39esd3tcTydIJXCXQgUUqIoChSlhtAOpXXwlYfz/2KjWHS5JrimGZLsBqU1SmPW60IiCKVKSJIqY1HYCsbXCE1AHQLCF9R1jU1lLWSaQt0yyCzDEGpMLB5jxDRPmKa/GIfhE8N/0LYRG3u9ID2fUCQJ7u8XZLQafIXZW+RskN8FMiq/5QLtMGNZnvvpspffkfC70npMfN/1PTZRFVjKhnFETyz3K6h0ZsFSNA0RtblDiRvV9Y96Kuo63lP5PD8a9QthR8Jlxbalmvxzc6o9WWeoUlER1b6/4rB9ovpy3W9CBSEVvq5Pwth16GKLyigW1lQ1rApry+GIFE5LOJVDpGcefLU2qkwBUxaQ+TtirenXPSz3WiHjWVwOe5y3P3D9+Y1qjks75McdksMTrqcDsssr8tMW8p5+OApog8dx9x1B30hoH4Qdu8yNRbSSdsyKtm0wUWFfaTQmg2FcNGMU5BldU+HjVLhGjKGku2Z9ehAWNzRlhsZrZIWCdh5XKo60O3iF1iTMITMoi1XJYnOlmmZ4I2ldopQCgRnsOSieoeAENdU4GA4lOgvBKIzOIDKPjhF55KwnsYZjw5WQiXDOoapqlByc4c+wEP4BEm1HxbM+XewAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Application Load Balancer\"\n        title=\"Application Load Balancer\"\n        src=\"/static/e79e3413d50855aeccc78898be51161c/fcda8/01.png\"\n        srcset=\"/static/e79e3413d50855aeccc78898be51161c/12f09/01.png 148w,\n/static/e79e3413d50855aeccc78898be51161c/e4a3f/01.png 295w,\n/static/e79e3413d50855aeccc78898be51161c/fcda8/01.png 590w,\n/static/e79e3413d50855aeccc78898be51161c/efc66/01.png 885w,\n/static/e79e3413d50855aeccc78898be51161c/c83ae/01.png 1180w,\n/static/e79e3413d50855aeccc78898be51161c/497e9/01.png 2064w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>로드밸런서 이름, VPC, 네트워크 매핑 등 기본 설정을 해준다.</p>\n<p><strong>리스너와 라우팅</strong> 설정 부분이 중요한데, 리스너를 추가하려면 설정된 경로(프로토콜, 포트)로 요청이 들어왔을 때 리스너가 포워딩해 줄 타겟 그룹을 만들어야 한다.</p>\n<p>하위의 <strong>Create target group</strong> 링크를 눌러 타겟 그룹을 생성하러 가보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUElEQVQoz5VSi27DIAzk/7+wzaZV07RH0zx4hgRIPc6EKoq2SUM64eD4fJwRp3ND5+aJTs0zXbuBpFQ0SslArLRm6G2vcYEhpcpujKFlWUiUQknDmDGMNOYdGMYSW+donmfyfofDN/JACIGEzswgRZc1JYoxMtZ1ZSDGj78BeWMsN19AKJXiLtbaB1nMxC4rw7X8Epg4odkRMfH5PC80ec+1Aj4hCW9CVXa/U9v1dHl7p147crhS9ieBeAf8ixprHZNhiXo1+ALJKRU1alqo055uGS4riCny+RFVZeUR4zaMLiuCCviCaSWoBUkM21k5PwI5+N9nDvbQuYk9cNPEsqtXZbI+F0QeVtoNbI+Hh9PmYXu7cYBngg7Vw49rS83LK7XSkvP/8DBtE4RC9nD71tnD3njqDDwMP/pXb1OfD2rF59eV3xHWPSurOK597i98A054Wbe3PfEeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Create target group\"\n        title=\"Create target group\"\n        src=\"/static/1a58427a38858a8b9390300310e3a262/fcda8/02.png\"\n        srcset=\"/static/1a58427a38858a8b9390300310e3a262/12f09/02.png 148w,\n/static/1a58427a38858a8b9390300310e3a262/e4a3f/02.png 295w,\n/static/1a58427a38858a8b9390300310e3a262/fcda8/02.png 590w,\n/static/1a58427a38858a8b9390300310e3a262/efc66/02.png 885w,\n/static/1a58427a38858a8b9390300310e3a262/c83ae/02.png 1180w,\n/static/1a58427a38858a8b9390300310e3a262/820f7/02.png 2126w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"타겟-그룹-생성\" style=\"position:relative;\"><a href=\"#%ED%83%80%EA%B2%9F-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\" aria-label=\"타겟 그룹 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%ED%83%80%EA%B2%9F-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\" aria-label=\"타겟 그룹 생성 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>타겟 그룹 생성</h2>\n<p>타겟 그룹 생성 페이지에서 타겟 유형은 <strong>인스턴스</strong>를 선택했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVQ4y32TiW6DMBBE+f/f66G2qqq0CQHaBBN8cNh4umNy0COx9LS2bMY7uyZbrd7x9PyCu7t73D88oqw+YYxFq3VCayNodF2HYRwxDMNNMt0eoJRCXasUrTEwImLMjBVxRh4OISB4f53gkW2VwWte4S0vsdMOLgI2/MX4CD1O0P46rexnWzn9vtN4K/bYNg6b2ki0yJUgketKD2hGQA3XaYSqE0Hng9w+SRYxxcQ4XebHtR6CZHibVs5kXrw3zQHr9eZcq9/wzH8jxmlBTDXOpmlC3w/IixLbskoU0umiJPO8+vxCrZrEXprHV8COU2Q5gmhlXlRH2ez7Hp3QS0YJuYRrJ8/Fug7GuoQlboaZ8/sTo6yToJKbPz7WKSMKnMQo/DuL5Zhk7wTPUStjmlSmlZrv8Wjra7dHc2jBksTjB7dIlilIVRaetmmBtaHIOQuZ/4AZHedhYTfNaZkT/iWbTY5CGsNuK+k6rRtrU0y4GdYu1dZ158bEP5ZHn0Ro9xRpfy7Dpbvc2+3rc329vOG4qCGT+waXZvJoBjwqVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Select target type\"\n        title=\"Select target type\"\n        src=\"/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/fcda8/03.png\"\n        srcset=\"/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/12f09/03.png 148w,\n/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/e4a3f/03.png 295w,\n/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/fcda8/03.png 590w,\n/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/efc66/03.png 885w,\n/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/c83ae/03.png 1180w,\n/static/c7a1e4f2bfced581c0fbdfe9d9b3af3f/541fe/03.png 1654w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>대상 인스턴스는 80번 포트로 연결되어 있기 때문에 HTTP:80으로 설정한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.10810810810811%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABNUlEQVQoz41TiXKFIAz0/7+zT+3UWzkENc0GsOjY12ZmJ0FgSTax+GoaatqWtDEEO47jX8gtXxfTPNM4TaSUJmOtEBtjSengsdYxTvtyhuN1Xcl7f0mkGMaRnHPUD+PPRRDpcCmsDVmOARNhmQx77k7YcrnbtjHhIMSw/VbSX3YpGek75yV9ECLGqygFD3m/iU+X8su5nmeG0HCaF8G8KMYieoZYnd+3fac9wvMD8PcHJMOuH7jLnZScH8KxdBQ+kWHP3ppxIazrT2qa9ixrj3g7NnQ8SiCEr6qmhcuEhnjZ2qCldNKusbvhO/bX1Un8K2FZVqLTohQTB92U1oI0gxJrc87gW8KPV0lt1wswi9AU5GnucDnNHQDyNF5Pf01RsYaSEXdWsozAGt8lhkenWeen2cvtG6kTrfOFbSHjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Setting protocol and port\"\n        title=\"Setting protocol and port\"\n        src=\"/static/78a1a0b39b10b0c56d1641a8730e77d9/fcda8/04.png\"\n        srcset=\"/static/78a1a0b39b10b0c56d1641a8730e77d9/12f09/04.png 148w,\n/static/78a1a0b39b10b0c56d1641a8730e77d9/e4a3f/04.png 295w,\n/static/78a1a0b39b10b0c56d1641a8730e77d9/fcda8/04.png 590w,\n/static/78a1a0b39b10b0c56d1641a8730e77d9/efc66/04.png 885w,\n/static/78a1a0b39b10b0c56d1641a8730e77d9/c83ae/04.png 1180w,\n/static/78a1a0b39b10b0c56d1641a8730e77d9/6568d/04.png 1660w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>필자는 로드밸런서를 설정하면 http로 들어오면 https로 리다이렉트할 계획이기 때문에, <strong>Health checks > Advanced health check settings</strong>에서 <strong>Success codes</strong>를 301번으로 설정했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.45945945945947%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABo0lEQVQ4y61Ui26DMAzM/3/itG7S2rIC5U3CK+D5DHRJoZ02LZKVmMflfDlH1VpTluWU5wUVRUl5UXCUNE0T/TTGcaQ4vlIYxXQJI2qallQcx5QxGECTNJO4JilVdU3aGDKmIdM0Mkve+Dk2x7/AGKwl9REmdHh7p4RBwLYsKyrKUgCHYZDo+2Ve8ttzDmtHsswUbFGVyitNQRBQ27b0H0NFUURnBgw+L8xKk9ZmDmO+13c5KgFrDLByQxkWEtSRgP4gZVjRYxic8PJBSlwBPYY1a9WwyAgA7X30aOx9p0Iu+eN4ouPpLCel+fRQEkrcm3HCLtiGYdt2u7vea+OG+37DMElTscq0GBVa2SW8NWv3SDcPMGUjw3dwe8Qm16uBndLlZNkBXddv2G8A8aO8XIz5l4PwAC9hyK2WUMPGhuD1wkbYLf5D16zGf6at+BDlwofox4IvBuhkHe2ktayv317JN8CqmndfPfjbcQ+s0HIvrwe5fmK+IHDTrAcyh9N6ZpZDWtTz53wLoVKV5bno13YdoQ2x7vr+eXTzDBnGheF623wB1js02rTxp28AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Setting health check path\"\n        title=\"Setting health check path\"\n        src=\"/static/c2798bfa6cd3f638c62a0415785d527e/fcda8/05.png\"\n        srcset=\"/static/c2798bfa6cd3f638c62a0415785d527e/12f09/05.png 148w,\n/static/c2798bfa6cd3f638c62a0415785d527e/e4a3f/05.png 295w,\n/static/c2798bfa6cd3f638c62a0415785d527e/fcda8/05.png 590w,\n/static/c2798bfa6cd3f638c62a0415785d527e/efc66/05.png 885w,\n/static/c2798bfa6cd3f638c62a0415785d527e/c83ae/05.png 1180w,\n/static/c2798bfa6cd3f638c62a0415785d527e/b54cd/05.png 1662w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>Secure listener settings</strong>에서는 SSL 인증서를 연결해주어야 한다.</p>\n<p>우측 하단의 <strong>Request new ACM certificate</strong> 링크를 눌러 SSL 인증서를 발급하러 가자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.27027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQY02WPiw6DIAxF/f9v1M09UCMqBXwB6l1hZssykpM25SS3zYSocLmWyPMC5UOAjIUxhrEJzb3WBtZa2HHENE1wzv3h/btmpDWGQcF5z0P/EdbIujIuzQel0HV9cn0I2Lbth3DOMsViXTcsDoi9Ig5QBGNHzMuSiI/4T0qZHK0JHfv96UcMXxAXyJpeo6wkCtFCSPqm7juO40jJO9dnR7i1hJpm3HuLiYPiFYFd70Pq42UvfDsz7xoZRxcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Request new ACM certificate\"\n        title=\"Request new ACM certificate\"\n        src=\"/static/42b81b04bf6f55aff32fdd4b13f6827a/fcda8/06.png\"\n        srcset=\"/static/42b81b04bf6f55aff32fdd4b13f6827a/12f09/06.png 148w,\n/static/42b81b04bf6f55aff32fdd4b13f6827a/e4a3f/06.png 295w,\n/static/42b81b04bf6f55aff32fdd4b13f6827a/fcda8/06.png 590w,\n/static/42b81b04bf6f55aff32fdd4b13f6827a/efc66/06.png 885w,\n/static/42b81b04bf6f55aff32fdd4b13f6827a/c83ae/06.png 1180w,\n/static/42b81b04bf6f55aff32fdd4b13f6827a/820f7/06.png 2126w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"certificate-manager-인증서-요청\" style=\"position:relative;\"><a href=\"#certificate-manager-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%9A%94%EC%B2%AD\" aria-label=\"certificate manager 인증서 요청 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#certificate-manager-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%9A%94%EC%B2%AD\" aria-label=\"certificate manager 인증서 요청 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Certificate Manager 인증서 요청</h2>\n<p><strong>AWS Certificate Manager > 요청</strong> 버튼을 클릭하고 퍼블릭 인증서 요청을 해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.108108108108105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5ElEQVQoz52RW27DIBBF2XuX1BV0E/2xP5qvNAVs3i+7vh3GkaMkqlQV6WiYy8BcQAzjiI/TCT4EOO//hHXuV8QwjLioCTElhBifiI851eWcnykFidbE+fwJPc0I5ND7m0vPBNLjoRtjucGyLGitcdzne6y1QlykglKaO3ShlIpKxbU2lJ6zVli/H9sDwLquEMY6GLp7d5BSPjbnXJh6PbDPu6vd2Yrlezto6wYKjJCKHGrN6GmC1juSnHdmY1jvt+hIKaFn0nyGcon5ImxIqClA9N/9F9d3Dt7S4Qnm/Q3z6wt+AK4xG0jLvRmoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"AWS Certificate Manager\"\n        title=\"AWS Certificate Manager\"\n        src=\"/static/50580491f0613bb64bb5e0368f0452d5/fcda8/07.png\"\n        srcset=\"/static/50580491f0613bb64bb5e0368f0452d5/12f09/07.png 148w,\n/static/50580491f0613bb64bb5e0368f0452d5/e4a3f/07.png 295w,\n/static/50580491f0613bb64bb5e0368f0452d5/fcda8/07.png 590w,\n/static/50580491f0613bb64bb5e0368f0452d5/efc66/07.png 885w,\n/static/50580491f0613bb64bb5e0368f0452d5/c83ae/07.png 1180w,\n/static/50580491f0613bb64bb5e0368f0452d5/821da/07.png 2200w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>도메인 이름을 작성하고 해당 도메인 소유를 검증할 수 있는 방법을 DNS와 이메일 중에 선택한다.</p>\n<p>검증이 완료되면 <strong>발급됨</strong> 상태가 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWUlEQVQI101MiwqAIAz0/3+0pAWWNp2KlxsYHRy7F3PMjForRAR3jIgpobVmPk297R4hXN9mXe0OIpRSLFNyznBEp4WKR+YoeYwxzOvj3rtpzRZXp4//neIFOoacY5UCcegAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"DNS check\"\n        title=\"DNS check\"\n        src=\"/static/de775f8f4275242bbdfe1893b8204875/fcda8/08.png\"\n        srcset=\"/static/de775f8f4275242bbdfe1893b8204875/12f09/08.png 148w,\n/static/de775f8f4275242bbdfe1893b8204875/e4a3f/08.png 295w,\n/static/de775f8f4275242bbdfe1893b8204875/fcda8/08.png 590w,\n/static/de775f8f4275242bbdfe1893b8204875/efc66/08.png 885w,\n/static/de775f8f4275242bbdfe1893b8204875/c83ae/08.png 1180w,\n/static/de775f8f4275242bbdfe1893b8204875/6c68b/08.png 1888w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>인증서 발급이 완료되면 타겟 그룹 설정 페이지로 돌아와 방금 만든 ACM을 선택하고 다음 버튼을 누른다.</p>\n<p><strong>Register Targets</strong> 페이지에서 연결할 인스턴스를 80번 포트로 등록한다.</p>\n<h2 id=\"http-요청을-https로-리다이렉트하기\" style=\"position:relative;\"><a href=\"#http-%EC%9A%94%EC%B2%AD%EC%9D%84-https%EB%A1%9C-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"http 요청을 https로 리다이렉트하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#http-%EC%9A%94%EC%B2%AD%EC%9D%84-https%EB%A1%9C-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"http 요청을 https로 리다이렉트하기 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>http 요청을 https로 리다이렉트하기</h2>\n<p>이제 로드밸런서 생성 페이지로 돌아와 생성한 타겟 그룹을 http/https 리스너에 모두 연결해주고 로드밸런서 생성을 마친다.</p>\n<p>로드 밸런서 페이지에서 생성한 로드 밸런서를 체크하고 하위의 리스너 탭을 클릭한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.05405405405406%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJ0lEQVQ4y42Uy64SQRCG50V16cZX0K0Ln0E3Lty4MzmvAIkncgiESyIXGe4wMwzDwMDh8ttfnbQh6IJO/nTRXfV31V81BEVRaLlcarfd6JCGyqYtHTcz5XmuOI4VRZHwwcYvSRK7A9iHw0Gsy+ViCAioVH5aYL4tNAjHej6dNZlM1Gg0VK/Xlaap2u22arWaWq2WZrOZodlsKssyXa/gdDrZ4WqVaL1O3auxc57a6/P53J2tNRqN3P1Ki8XCMoWM3d9zhz97QJqbTe5IN27fuIuVleZL5jGy3263FkC217+RY7fbWSzkwfl8dvrl2hfuMFtrna7MATJehYBgnLEh4TGvJ7+tBy7GSoZwvkw0WST6PZopHE0smHJ8ab5czgBnaAwgY6cSa0qcP+vNl55eferq9eeu3n4daBq79J2mxX5vjmRyzzLCbHfUh+89vf/2S+8cPj4MFKVOvwgdX3QiIyq5ZwWOVjrtdT7stM0SQxxHphNC+5nDRkNkmE5fpoDsbxEcj0fNnC6j8USVpyf9eHxUtVo1XcIw1HA4tJ3R6Xa7KpfLKpVK6vV6Rux9PGxs6CJZ9Pt9C8LZjwR3AJusIIAIHxpy7QMC6kYfiMkKIt+x20U1kFI+3d67pv2jIYEQ8sXghE7YzBU7d9fgDGJsvmMPyNkD/zIYDAb2/aIXJRHsx4GFLJ1Ox6RBL3zG47HJAGjY35LB7Xj4fxCPu8bGO9+W879y78EfVEDDPrc9A7oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Click listener\"\n        title=\"Click listener\"\n        src=\"/static/fbb56b3ef458bbdafde5b3fa6d241820/fcda8/09.png\"\n        srcset=\"/static/fbb56b3ef458bbdafde5b3fa6d241820/12f09/09.png 148w,\n/static/fbb56b3ef458bbdafde5b3fa6d241820/e4a3f/09.png 295w,\n/static/fbb56b3ef458bbdafde5b3fa6d241820/fcda8/09.png 590w,\n/static/fbb56b3ef458bbdafde5b3fa6d241820/9c177/09.png 880w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>http로 요청이 들어오면 https로 리다이렉트 되도록 설정해보자.</p>\n<p><strong>https:443</strong> 리스너를 선택하고 <strong>편집</strong> 버튼을 클릭해서 다음과 같이 설정해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+klEQVQ4y6VUi3KbMBDk/z+vSdrUmSYNBmzACMxTiMf19pAwsSdNJtHMopOQ7k57K3lBGNLd3QP9/PVIu90TNU0jqDd9vRnLXH3pL3ZNbduSlylF/j6gfRBKHx2OgiCMBGF0kB7/0Ud2LPOBXRMeKElTcexpranrOprnmfq+l/478NJTJtEbTjdOUhqGgYZxFCyLaIVrsx0s8/ObOY82DXwYdvid5imVk+/vmZMjxXlNWvfUMQ3aAjao0Bv0AnMzliOXVc2EnuiUKQEocDag8oJa5rhtLboFXadXW9ug0zSRZ4yhoigoSRJSZUO9GWgEj29gbsbYBxuOUk4I/COgB85Q7qqqqGQOERmLsdBt+h+wZjlBy8mYxSH09+P+nh5/76higWbMK6Li37wt7wdtAofDMMqREcFlCy4EV5L4SIPC4WAzVHkux42ZS6QOHSLAdLXpPceSIRyO/HECBXBkuaPgFba9xxWrARu2GV8LXRzqYaLXWNHe9+WehlFEGcvFcLWRKXS5dTC/Q8PqEEZxPtPzy196ZYH/eX6Rx6EsK54vJcvP3OHLkUcU5SyADaBQkAMwjtPnq+yEfTjG8hy5GwMOUQz3SBinOftwgAoU8LpAa5VxXyFOPJI4Iuwlw8XJDcwiaBdwBf/zUMEojkmxFivrsChLec6+0v4BqN/JmS7uAL8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Listener details\"\n        title=\"Listener details\"\n        src=\"/static/8bfac6474fa8723f89c54c0725ab1f56/fcda8/10.png\"\n        srcset=\"/static/8bfac6474fa8723f89c54c0725ab1f56/12f09/10.png 148w,\n/static/8bfac6474fa8723f89c54c0725ab1f56/e4a3f/10.png 295w,\n/static/8bfac6474fa8723f89c54c0725ab1f56/fcda8/10.png 590w,\n/static/8bfac6474fa8723f89c54c0725ab1f56/efc66/10.png 885w,\n/static/8bfac6474fa8723f89c54c0725ab1f56/c83ae/10.png 1180w,\n/static/8bfac6474fa8723f89c54c0725ab1f56/016a8/10.png 1576w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이제 다시 로드 밸런서 페이지로 돌아와 설명 탭에서 DNS 이름을 복사한 후, 도메인 관리 사이트에서 해당 도메인의 A레코드 혹은 CNAME에 값을 업데이트 해주면 끝이다.</p>\n<p>https 환경을 구성하는 것도 설계를 어떻게 하느냐에 따라 달라질 수 있기 때문에 참고만 해주시길 바란다.</p>\n<p>ELB와 ACM만으로 SSL 인증서를 발급받고 https 서버로 라우팅 해보았는데, 타겟 그룹이나 리스너 설정 부분에서 조금 헤매긴 했지만 별다른 코드 작성 없이 쉽게 https 환경을 구성할 수 있다는 점이 놀라웠다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/aws/ELB-ACM-SSL/#%EA%B0%9C%EC%9A%94\">개요</a></p>\n<ul>\n<li><a href=\"/aws/ELB-ACM-SSL/#%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%84%9C-%EC%83%9D%EC%84%B1\">로드 밸런서 생성</a></li>\n<li><a href=\"/aws/ELB-ACM-SSL/#%ED%83%80%EA%B2%9F-%EA%B7%B8%EB%A3%B9-%EC%83%9D%EC%84%B1\">타겟 그룹 생성</a></li>\n<li><a href=\"/aws/ELB-ACM-SSL/#certificate-manager-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%9A%94%EC%B2%AD\">Certificate Manager 인증서 요청</a></li>\n<li><a href=\"/aws/ELB-ACM-SSL/#http-%EC%9A%94%EC%B2%AD%EC%9D%84-https%EB%A1%9C-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%ED%8A%B8%ED%95%98%EA%B8%B0\">http 요청을 https로 리다이렉트하기</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"📦 AWS ELB와 ACM로 https 환경 구성하기","date":"December 11, 2021"}}},"pageContext":{"slug":"/aws/ELB-ACM-SSL/","previous":{"fields":{"slug":"/kubernetes/Pod/"},"frontmatter":{"title":"🎡 Pod의 개념과 특징","category":"Kubernetes","draft":false}},"next":{"fields":{"slug":"/retrospective/2021-Second-Half/"},"frontmatter":{"title":"🌴 2021 하반기 회고","category":"Retrospective","draft":false}}}},"staticQueryHashes":["3128451518","96099027"]}
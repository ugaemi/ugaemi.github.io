{"componentChunkName":"component---src-templates-blog-post-js","path":"/tdd/TDD-csrf-token/","result":{"data":{"site":{"siteMetadata":{"title":"ê°œë¯¸ì˜ ê°œë°œë…¸íŠ¸","author":"ugaemi","siteUrl":"http://ugaemi.com","comment":{"disqusShortName":"","utterances":"ugaemi/blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"19335998-cb52-555c-9ff3-4644c725f2df","excerpt":"ì´ìŠˆ ìš”ì¦˜ íŒŒì´ì¬ì„ ì´ìš©í•œ í´ë¦°ì½”ë“œë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ ì±…ì„ ë”°ë¼í•´ê°€ë©° TDDë¡œ Djangoë¥¼ ë‹¤ë£¨ëŠ” ë²•ì„ ë°°ì›Œê°€ê³  ìˆë‹¤. ì–´ì œëŠ” ì…ë ¥ í¼ì„ ë§Œë“œëŠ” ë¶€ë¶„ì„ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì•˜ëŠ”ë° ìê¾¸ ì‹¤íŒ¨ë¥¼ í–ˆë‹¤.\nì´ìœ ëŠ” ì•ˆì˜ csrf token ë•Œë¬¸ì´ì—ˆë‹¤. CSRF(Cross-Site Request Forgery)ë€ CSRFâ€¦","html":"<h2 id=\"ì´ìŠˆ\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%8A%88\" aria-label=\"ì´ìŠˆ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%EC%9D%B4%EC%8A%88\" aria-label=\"ì´ìŠˆ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì´ìŠˆ</h2>\n<p>ìš”ì¦˜ <a href=\"https://book.naver.com/bookdb/book_detail.nhn?bid=8819504\">íŒŒì´ì¬ì„ ì´ìš©í•œ í´ë¦°ì½”ë“œë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ</a> ì±…ì„ ë”°ë¼í•´ê°€ë©° TDDë¡œ Djangoë¥¼ ë‹¤ë£¨ëŠ” ë²•ì„ ë°°ì›Œê°€ê³  ìˆë‹¤.</p>\n<p>ì–´ì œëŠ” ì…ë ¥ í¼ì„ ë§Œë“œëŠ” ë¶€ë¶„ì„ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸í•´ë³´ì•˜ëŠ”ë° ìê¾¸ ì‹¤íŒ¨ë¥¼ í–ˆë‹¤.\nì´ìœ ëŠ” <code class=\"language-text\">form</code>ì•ˆì˜ csrf token ë•Œë¬¸ì´ì—ˆë‹¤.</p>\n<h3 id=\"csrfcross-site-request-forgeryë€\" style=\"position:relative;\"><a href=\"#csrfcross-site-request-forgery%EB%9E%80\" aria-label=\"csrfcross site request forgeryë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#csrfcross-site-request-forgery%EB%9E%80\" aria-label=\"csrfcross site request forgeryë€ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSRF(Cross-Site Request Forgery)ë€</h3>\n<blockquote>\n<p>CSRFëŠ” ì›¹ì‚¬ì´íŠ¸ ì·¨ì•½ì  ê³µê²©ì˜ í•˜ë‚˜ë¡œ, ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ì§€ì™€ëŠ” ë¬´ê´€í•˜ê²Œ ê³µê²©ìê°€ ì˜ë„í•œ í–‰ìœ„(ìˆ˜ì •, ì‚­ì œ, ë“±ë¡ ë“±)ë¥¼ íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ì— ìš”ì²­í•˜ê²Œ í•˜ëŠ” ê³µê²©ì„ ë§í•œë‹¤. ì‚¬ì´íŠ¸ ê°„ ìŠ¤í¬ë¦½íŒ…(XSS)ì„ ì´ìš©í•œ ê³µê²©ì´ ì‚¬ìš©ìê°€ íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ë¥¼ ì‹ ìš©í•˜ëŠ” ì ì„ ë…¸ë¦° ê²ƒì´ë¼ë©´, CSRFëŠ” íŠ¹ì • ì›¹ì‚¬ì´íŠ¸ê°€ ì‚¬ìš©ìì˜ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì‹ ìš©í•˜ëŠ” ìƒíƒœë¥¼ ë…¸ë¦° ê²ƒì´ë‹¤. ì¼ë‹¨ ì‚¬ìš©ìê°€ ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•œ ìƒíƒœì—ì„œ ì‚¬ì´íŠ¸ê°„ ìš”ì²­ ìœ„ì¡° ê³µê²© ì½”ë“œê°€ ì‚½ì…ëœ í˜ì´ì§€ë¥¼ ì—´ë©´, ê³µê²© ëŒ€ìƒì´ ë˜ëŠ” ì›¹ì‚¬ì´íŠ¸ëŠ” ìœ„ì¡°ëœ ê³µê²© ëª…ë ¹ì´ ë¯¿ì„ ìˆ˜ ìˆëŠ” ì‚¬ìš©ìë¡œë¶€í„° ë°œì†¡ëœ ê²ƒìœ¼ë¡œ íŒë‹¨í•˜ê²Œ ë˜ì–´ ê³µê²©ì— ë…¸ì¶œëœë‹¤.</p>\n</blockquote>\n<p>ì´ì™€ ê°™ì€ CSRF ê³µê²©ì„ ë§‰ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ tokenì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ ì¸ì¦ì„ í•˜ëŠ” ë°©ì‹ì´ ìˆë‹¤.\nDjangoì—ì„œëŠ” <code class=\"language-text\">form</code> íƒœê·¸ ì•ˆì— ì¶”ê°€í•˜ì—¬ ê°„í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ ì´ tokenì„ ì¶”ê°€í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸°ê°€ ë²ˆê±°ë¡œì›Œì¡Œë‹¤.\nì‘ë‹µì„ ë°›ì€ htmlì—ëŠ” <code class=\"language-text\">hidden</code> typeì˜ <code class=\"language-text\">input</code>ìœ¼ë¡œ tokenì´ ìƒì„±ë˜ì–´ìˆì§€ë§Œ, template htmlì—ëŠ” ìƒì„±ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">FAIL: test_home_page_returns_correct_html <span class=\"token punctuation\">(</span>lists.tests.HomePageTest<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"/Users/yugyeong/Study/tdd-4-clean-code/superlists/lists/tests.py\"</span>, line <span class=\"token number\">19</span>, <span class=\"token keyword\">in</span> test_home_page_returns_correct_html\n    self.assertEqual<span class=\"token punctuation\">(</span>response.content.decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>, expected_html<span class=\"token punctuation\">)</span>\nAssertionError: <span class=\"token string\">'&lt;htm[229 chars]     &lt;input type=\"hidden\" name=\"csrfmiddleware[206 chars]l>\\n'</span> <span class=\"token operator\">!=</span> <span class=\"token string\">'&lt;htm[229 chars]     \\n        &lt;/form>\\n        &lt;table id=\"id_[85 chars]l>\\n'</span></code></pre></div>\n<h2 id=\"ê³ ë¯¼\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EB%AF%BC\" aria-label=\"ê³ ë¯¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%EA%B3%A0%EB%AF%BC\" aria-label=\"ê³ ë¯¼ permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê³ ë¯¼</h2>\n<p>ì´ ë¬¸ì œë¥¼ ë§Œë‚˜ê¸° ì „ê¹Œì§€ì˜ í…ŒìŠ¤íŠ¸ëŠ” ë§¤ìš° ìˆœì¡°ë¡œì› ë‹¤.\në¹„êµí•˜ëŠ” ëŒ€ìƒì˜ ê°’ì„ ëª¨ë‘ ì•Œê³  ìˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤.</p>\n<p>ì–¸ì  ê°€ <em>ëœë¤í•œ ê°’ì€ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í•˜ì§€?</em> ë¼ëŠ” ì˜ë¬¸ì´ ë“  ì ì´ ìˆì—ˆë‹¤.\nì´ ì½”ë“œëŠ” ì¢…í˜¸ì˜¤ë¹ ê°€ <a href=\"https://www.slideshare.net/OKJSP/okkycon-120497749?from_m_app=ios\">ì°¸ê³ í•˜ë¼ê³  ë³´ë‚´ì£¼ì‹  ë§í¬</a> ì† <strong>í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ ì½”ë“œ</strong>ì— í¬í•¨ëœë‹¤ê³  ìƒê°í–ˆë‹¤.</p>\n<p>ë‚´ê°€ ìƒê°í•œ í•´ê²° ë°©ë²•ì€ ì´ 3ê°€ì§€ì˜€ë‹¤.</p>\n<ol>\n<li>í…ŒìŠ¤íŠ¸ìš© html íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì.</li>\n<li>í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš´ ì½”ë“œì™€ ì–´ë ¤ìš´ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ì.</li>\n<li>í…ŒìŠ¤íŠ¸ì—ì„œ ì œì™¸ì‹œí‚¤ì.</li>\n</ol>\n<p>1ë²ˆì€ ì°¸ ë¬´ì‹í•œ ë°©ë²•ì´ë‹¤.\ní…ŒìŠ¤íŠ¸ìš© html íŒŒì¼ì„ ë˜ í•˜ë‚˜ ë§Œë“¤ê²Œë˜ë©´, ì´ë²ˆì€ ì‰½ê²Œ ë„˜ì–´ê°ˆì§€ë¼ë„ ì•ìœ¼ë¡œ ë¹„ìš©ì´ ì–´ë§ˆì–´ë§ˆí•˜ê²Œ ë“¤ ê²ƒì´ë‹¤.</p>\n<p>2ë²ˆì€ í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš´ ì½”ë“œì™€ ì–´ë ¤ìš´ ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•(ì¢…í˜¸ì˜¤ë¹  ì¶”ì²œ ë°©ë²•!)ì´ë‹¤.\n<a href=\"https://engineering.21buttons.com/clean-architecture-in-django-d326a4ab86a9\">í´ë¦° ì•„í‚¤í…ì²˜</a>ì™€ í•¨ê»˜ ìƒê°í•´ë³´ë©´ csrf tokenì„ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì€ ì›ì˜ ê°€ì¥ ë°”ê¹¥ìª½ì´ ë˜ê³  htmlì€ ì¢€ ë” ì•ˆìª½ ì›ì— ìœ„ì¹˜í•œë‹¤.\ní…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ìš´ ì½”ë“œë¥¼ ë”°ë¡œ ë¹¼ì„œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì´ë‹¤.\n(ë¶„ë¦¬ë„ í•˜ê³  í…ŒìŠ¤íŠ¸ë„ í•˜ëŠ”) ê°€ì¥ ì´ìƒì ì¸ ë°©ë²•ì´ì§€ë§Œ, í˜„ì¬ í…ŒìŠ¤íŠ¸í•˜ê³  ìˆëŠ” ë¶€ë¶„(html)ì€ ë¶„ë¦¬í•œë‹¤ê³  í•´ì„œ ê²°ê³¼ë¥¼ ë°”ê¿€ ìˆ˜ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” íŒë‹¨ì´ ì„°ë‹¤.</p>\n<p>3ë²ˆì€ í…ŒìŠ¤íŠ¸ì—ì„œ ì œì™¸ì‹œí‚¤ëŠ” ë°©ë²•ì´ë‹¤.\nê°€ì¥ ì‰½ê³  ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ê¸°ë„ í•˜ë‹¤.</p>\n<p>ë‚˜ëŠ” ê³ ë¯¼ ëì— 3ë²ˆì„ íƒí–ˆë‹¤.\ncsrf tokenì€ í•­ìƒ ë³€ê²½ë˜ëŠ” ê°’ì´ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ì—ì„œ ì œì™¸í•œë‹¤ê³  í•´ì„œ ì‹¤ì œ ì½”ë“œì— ì˜í–¥ì´ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë¯€ë¡œ ê´œì°®ì„ ê²ƒì´ë¼ íŒë‹¨í–ˆë‹¤.</p>\n<p>ë” ë‚˜ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•˜ì‹  ë¶„ì´ ê³„ì‹œë‹¤ë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¹ :)</p>\n<h2 id=\"í•´ê²°\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"í•´ê²° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"í•´ê²° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²°</h2>\n<p><a href=\"https://stackoverflow.com/questions/34629261/django-render-to-string-ignores-csrf-token\">ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°</a>ì—ì„œ ë‚˜ì™€ ê°™ì€ ì´ìŠˆë¥¼ ê²ªê³  ìˆëŠ” ì§ˆë¬¸ì„ ë°œê²¬í–ˆë‹¤.\nê·¸ì— ëŒ€í•œ ë‹µ ì¤‘ì— ì •ê·œì‹ìœ¼ë¡œ csrf token ë¶€ë¶„ì„ ì°¾ì•„ë‚´ì–´ ì‚­ì œí•œ í›„ ë¹„êµí•˜ëŠ” ì½”ë“œë¥¼ ë³´ì•˜ê³  ë‚˜ëŠ” ì´ë¥¼ ì ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.</p>\n<p>ë‹¤ìŒì€ <code class=\"language-text\">test.py</code>ì˜ <code class=\"language-text\">HomePageTest</code> í´ë˜ìŠ¤ì˜ ì „ì²´ ì½”ë“œì´ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> re\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HomePageTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token decorator annotation punctuation\">@staticmethod</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">remove_csrf</span><span class=\"token punctuation\">(</span>html_code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        csrf_regex <span class=\"token operator\">=</span> <span class=\"token string\">r'&lt;input[^>]+csrfmiddlewaretoken[^>]+>'</span>\n        <span class=\"token keyword\">return</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span>csrf_regex<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> html_code<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">assertEqualExceptCSRF</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> html_code1<span class=\"token punctuation\">,</span> html_code2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>\n            self<span class=\"token punctuation\">.</span>remove_csrf<span class=\"token punctuation\">(</span>html_code1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            self<span class=\"token punctuation\">.</span>remove_csrf<span class=\"token punctuation\">(</span>html_code2<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_root_url_resolves_to_home_page_view</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        found <span class=\"token operator\">=</span> resolve<span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>found<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">,</span> home_page<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_home_page_returns_correct_html</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        request <span class=\"token operator\">=</span> HttpRequest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        response <span class=\"token operator\">=</span> home_page<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqualExceptCSRF<span class=\"token punctuation\">(</span>\n            render_to_string<span class=\"token punctuation\">(</span><span class=\"token string\">'home.html'</span><span class=\"token punctuation\">,</span> request<span class=\"token operator\">=</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            response<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_home_page_can_save_a_POST_request</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        request <span class=\"token operator\">=</span> HttpRequest<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">=</span> <span class=\"token string\">'POST'</span>\n        request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">[</span><span class=\"token string\">'item_text'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ì‹ ê·œ ì‘ì—… ì•„ì´í…œ'</span>\n\n        response <span class=\"token operator\">=</span> home_page<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>assertIn<span class=\"token punctuation\">(</span><span class=\"token string\">'ì‹ ê·œ ì‘ì—… ì•„ì´í…œ'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqualExceptCSRF<span class=\"token punctuation\">(</span>\n            render_to_string<span class=\"token punctuation\">(</span><span class=\"token string\">'home.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'new_item_text'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'ì‹ ê·œ ì‘ì—… ì•„ì´í…œ'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            response<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ë¬¸ì œ ì—†ì´ í…ŒìŠ¤íŠ¸ê°€ í†µê³¼ë  ê²ƒì´ë‹¤.</p>\n<p>ì•„ì§ TDD ì´ˆì§œë¼ ì±…ì„ ë”°ë¼ê°€ëŠ” ê²ƒë„ ì¡°ê¸ˆì€ ë²…ì°¨ë‹¤..\ní•œ ì¥ ë„˜ê¸¸ë•Œë§ˆë‹¤ ì‚½ì§ˆ ì¤‘ì´ê¸´ í•œë°, ê·¸ë˜ë„ ì¬ë°Œë‹¹ :D</p>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h2>\n<ul>\n<li><a href=\"https://book.naver.com/bookdb/book_detail.nhn?bid=8819504\">íŒŒì´ì¬ì„ ì´ìš©í•œ í´ë¦°ì½”ë“œë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ</a></li>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EC%82%AC%EC%9D%B4%ED%8A%B8_%EA%B0%84_%EC%9A%94%EC%B2%AD_%EC%9C%84%EC%A1%B0\">ìœ„í‚¤ë°±ê³¼</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34629261/django-render-to-string-ignores-csrf-token\">ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/tdd/TDD-csrf-token/#%EC%9D%B4%EC%8A%88\">ì´ìŠˆ</a></p>\n<ul>\n<li><a href=\"/tdd/TDD-csrf-token/#csrfcross-site-request-forgery%EB%9E%80\">CSRF(Cross-Site Request Forgery)ë€</a></li>\n</ul>\n</li>\n<li><a href=\"/tdd/TDD-csrf-token/#%EA%B3%A0%EB%AF%BC\">ê³ ë¯¼</a></li>\n<li><a href=\"/tdd/TDD-csrf-token/#%ED%95%B4%EA%B2%B0\">í•´ê²°</a></li>\n<li><a href=\"/tdd/TDD-csrf-token/#references\">References</a></li>\n</ul>","frontmatter":{"title":"ğŸ” TDD csrf token ë¬¸ì œ í•´ê²°","date":"October 14, 2019"}}},"pageContext":{"slug":"/tdd/TDD-csrf-token/","previous":{"fields":{"slug":"/django/Django-reverse-and-resolve/"},"frontmatter":{"title":"ğŸ”« Django reverse()ì™€ resolve()","category":"Django","draft":false}},"next":{"fields":{"slug":"/django/Django-crontab/"},"frontmatter":{"title":"ğŸ”« django-crontab ì‚¬ìš©í•˜ê¸°","category":"Django","draft":false}}}},"staticQueryHashes":["3128451518","96099027"]}